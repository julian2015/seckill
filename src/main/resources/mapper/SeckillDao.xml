<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace命名空间,作用就是对sql进行分类化管理,理解sql隔离
注意:使用mapper代理方法开发,namespace有特殊重要的作用,namespace等于mapper接口地址-->
<mapper namespace="org.seckill.dao.SeckillDao">
 	<!--mapper作用:为DAO接口方法提供sql语句配置-->
 	
	<!-- int reduceNumber(long seckillId, Date killTime);-->
	<update id="reduceNumber">
		update
			seckill
		set
			number = number-1
	    where seckill_id = #{seckillId}
	    and start_time <![CDATA[ <=]]> #{killTime}
	    and end_time >= #{killTime}
	    and number > 0;
	</update>
	<!-- Seckill queryById(long seckillId); -->
	<select id="queryById" resultType="Seckill" parameterType="long">
		select seckill_id, name, number, start_time, end_time, create_time
		from seckill
		where seckill_id = #{SeckillId}
	</select>
	
	<!-- <List>Seckill queryAll(int offset, int limit); -->
	<select id="queryAll" resultType="Seckill">
		select seckill_id, name, number, start_time, end_time, create_time
		from seckill
		order by create_time decs
		limit #{offset},#{limit}
	</select>
	
</mapper>